(this["webpackJsonpfrontend-blog"]=this["webpackJsonpfrontend-blog"]||[]).push([[0],{112:function(e,t,n){"use strict";n.r(t);var r=n(135),a=n(124),c=Object(a.a)({config:{initialColorMode:"dark",useSystemColorMode:!1}}),s=n(0),o=n(75),i=n.n(o),l=n(6),u=n(37),j=n(11),b=n.n(j),d=n(22),h=n(4),p=n(137),g=n(134),x=n(115),O=n(125),f=n(60),v=n(2),m=function(e){var t=Object(x.b)().toggleColorMode,n=Object(x.c)("dark","light"),r=Object(x.c)(f.a,f.b);return Object(v.jsx)(O.a,Object(u.a)({size:"md",fontSize:"lg","aria-label":"Switch to ".concat(n," mode"),variant:"ghost",color:"current",marginLeft:"2",onClick:t,icon:Object(v.jsx)(r,{})},e))},w=n(32),S=n.n(w),k="/api/blogs",y=null,C={getAll:function(){var e=Object(d.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get(k);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setToken:function(e){y="bearer ".concat(e)},create:function(){var e=Object(d.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:y}},e.next=3,S.a.post(k,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(d.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.put("".concat(k,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},B=n(127),I=n(128),L=n(129),z=n(138),R=function(e){var t=e.blogs;return Object(v.jsx)(p.c,{divider:Object(v.jsx)(p.b,{}),borderColor:"gray.100",borderWidth:"2px",p:"4",borderRadius:"lg",w:"100%",maxW:{base:"90vw",sm:"80vw",lg:"50vw",xl:"40vw"},alignItems:"strech",justifySelf:"center",children:t.map((function(e){return Object(v.jsxs)(p.c,{justifySelf:"left",alignItems:"left",children:[Object(v.jsx)(B.a,{children:Object(v.jsxs)(I.a,{children:[" ",Object(v.jsx)("b",{children:"Blog Title:"})," ",e.title]})}),Object(v.jsx)(B.a,{children:Object(v.jsxs)(I.a,{children:[" ",Object(v.jsx)("b",{children:"Author"}),": ",e.author]})}),Object(v.jsx)(B.a,{children:Object(v.jsxs)(I.a,{children:[" ",Object(v.jsx)("b",{children:"URL:"})," ",Object(v.jsx)(L.a,{href:e.url,isExternal:!0,children:Object(v.jsx)(z.a,{mx:"2px"})})]})})]},e.id)}))})},T={login:function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},U=n(130),W=function(e){var t=e.message,n=e.color;return null===t?null:Object(v.jsx)(U.a,{colorScheme:n.toString(),p:"4",m:"4",borderRadius:"lg",children:t})},A=n(131),E=n(132),J=n(136),M=n(78),N=function(e){var t=e.setUsername,n=e.username,r=e.handleLogin,a=e.password,c=e.setPassword;return Object(v.jsx)("form",{onSubmit:r,children:Object(v.jsxs)(p.c,{spacing:4,children:[Object(v.jsxs)(A.a,{children:[Object(v.jsx)(E.a,{children:"username:"}),Object(v.jsx)(J.a,{type:"text",value:n,name:"Username",onChange:function(e){var n=e.target;return t(n.value)}})]}),Object(v.jsxs)(A.a,{children:[Object(v.jsx)(E.a,{children:"password:"}),Object(v.jsx)(J.a,{type:"password",value:a,name:"Password",onChange:function(e){var t=e.target;return c(t.value)}})]}),Object(v.jsx)(M.a,{type:"submit",colorScheme:"pink",px:8,children:"login"})]})})},P=function(e){var t=e.user,n=e.handleLogout;return Object(v.jsxs)(p.a,{children:[Object(v.jsxs)(I.a,{children:[t.name," logged-in"]}),Object(v.jsx)(M.a,{colorScheme:"pink",px:8,onClick:n,children:"logout"})]})},D=function(e){var t=e.newBlog,n=e.addBlog,r=e.handleBlogChange;return Object(v.jsx)("form",{onSubmit:n,children:Object(v.jsxs)(p.c,{p:8,spacing:4,children:[Object(v.jsxs)(A.a,{children:[Object(v.jsx)(E.a,{children:"title:"}),Object(v.jsx)(J.a,{type:"text",value:t.title,variant:"filled",onChange:r,name:"title"})]}),Object(v.jsxs)(A.a,{children:[Object(v.jsx)(E.a,{children:"author:"}),Object(v.jsx)(J.a,{type:"text",value:t.author,variant:"filled",onChange:r,name:"author"})]}),Object(v.jsxs)(A.a,{children:[Object(v.jsx)(E.a,{children:"url:"}),Object(v.jsx)(J.a,{type:"text",value:t.url,variant:"filled",onChange:r,name:"url"})]}),Object(v.jsx)(M.a,{type:"submit",colorScheme:"pink",px:8,alignSelf:"left",children:"add blog"})]})})},G=function(){var e=Object(s.useState)([]),t=Object(h.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(null),c=Object(h.a)(a,2),o=c[0],i=c[1],j=Object(s.useState)(""),x=Object(h.a)(j,2),O=x[0],f=x[1],w=Object(s.useState)(""),S=Object(h.a)(w,2),k=S[0],y=S[1],B=Object(s.useState)(""),I=Object(h.a)(B,2),L=I[0],z=I[1],U=Object(s.useState)({title:"",author:"",url:""}),A=Object(h.a)(U,2),E=A[0],J=A[1],M=Object(s.useState)("red"),G=Object(h.a)(M,2),q=G[0],F=G[1],H="loggedBlogappUser";Object(s.useEffect)((function(){C.getAll().then((function(e){return r(e)}))}),[]),Object(s.useEffect)((function(){var e=window.localStorage.getItem(H);if(e){var t=JSON.parse(e);z(t),C.setToken(t.token)}}),[]);var K=function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log("logging in with",O),e.prev=2,e.next=5,T.login({username:O,password:k});case 5:n=e.sent,window.localStorage.setItem(H,JSON.stringify(n)),C.setToken(n.token),z(n),f(""),y(""),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),Q("Wrong Credentials","red");case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(e,t){i(e),F(t),setTimeout((function(){i(null)}),5e3)},V=function(){var e=Object(d.a)(b.a.mark((function e(t){var a,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={title:E.title,author:E.author,url:E.url},e.prev=2,e.next=5,C.create(a);case 5:c=e.sent,r(n.concat(c)),J({title:"",author:"",url:""}),Q("New Blog! ".concat(c.title," by ").concat(c.author," added"),"green"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),Q("Cannot post blog","red");case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return console.log(E),""===L?Object(v.jsxs)(p.c,{spacing:4,p:8,height:"100vh",children:[Object(v.jsx)(m,{alignSelf:"flex-end",mr:"8",isRound:"true"}),Object(v.jsx)(g.a,{mb:"4",fontWeight:"extrabold",size:"2xl",bgGradient:"linear(to-r,pink.500,pink.300,blue.500)",bgClip:"text",children:"Blogs"}),Object(v.jsx)(W,{message:o,color:q}),Object(v.jsx)(N,{password:k,handleLogin:K,setPassword:y,username:O,setUsername:f})]}):Object(v.jsxs)(p.c,{spacing:4,p:8,height:"100vh",children:[Object(v.jsx)(m,{alignSelf:"flex-end",mr:"8",isRound:"true"}),Object(v.jsx)(g.a,{mb:"4",fontWeight:"extrabold",size:"2xl",bgGradient:"linear(to-r,pink.500,pink.300,blue.500)",bgClip:"text",children:"Blogs"}),Object(v.jsx)(W,{message:o,color:q}),Object(v.jsx)(P,{user:L,handleLogout:function(){window.localStorage.removeItem(H),z("")}}),Object(v.jsx)(D,{addBlog:V,handleBlogChange:function(e){var t=e.target.value;J(Object(u.a)(Object(u.a)({},E),{},Object(l.a)({},e.target.name,t)))},newBlog:E}),Object(v.jsx)(R,{blogs:n})]})};i.a.render(Object(v.jsx)(r.a,{theme:c,children:Object(v.jsx)(G,{})}),document.getElementById("root"))}},[[112,1,2]]]);
//# sourceMappingURL=main.229cea7c.chunk.js.map